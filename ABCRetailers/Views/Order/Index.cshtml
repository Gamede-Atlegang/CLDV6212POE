@model IEnumerable<ABCRetailers.Models.Order>
@{
	ViewData["Title"] = "Orders";
}
<div class="d-flex justify-content-between align-items-center mb-3">
	<h2>Orders</h2>
	<a class="btn btn-primary" asp-action="Create">Add Order</a>
</div>
@if (TempData["Message"] is string m)
{
	<div class="alert alert-success">@m</div>
}
<table class="table table-striped">
	<thead>
		<tr>
			<th>Order ID</th>
			<th>Customer</th>
			<th>Product</th>
			<th>Quantity</th>
			<th class="text-end">Total</th>
			<th>Status</th>
			<th>Date</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		@foreach (var o in Model)
		{
			<tr>
				<td>@o.OrderId</td>
				<td>@o.Username</td>
				<td>@o.ProductName</td>
				<td>@o.Quantity</td>
				<td class="text-end">@o.TotalPrice.ToString("C2")</td>
				<td>
					<span class="badge @(o.Status switch {
					"Pending" => "bg-warning text-dark",
					"Processing" => "bg-info",
					"Completed" => "bg-success",
					"Cancelled" => "bg-danger",
					_ => "bg-secondary"
				})">
						@o.Status
					</span>
				</td>
				<td>@o.OrderDate.ToString("MM/dd/yyyy")</td>
				<td class="text-end">
					<a class="btn btn-sm btn-outline-info" asp-action="Details" asp-route-id="@o.OrderId">Details</a>
					<a class="btn btn-sm btn-outline-secondary" asp-action="Edit" asp-route-id="@o.OrderId">Edit</a>
					<form asp-action="Delete" asp-route-id="@o.OrderId" method="post" class="d-inline">
						<button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete this order?');">Delete</button>
					</form>
				</td>
			</tr>
		}
	</tbody>
</table>